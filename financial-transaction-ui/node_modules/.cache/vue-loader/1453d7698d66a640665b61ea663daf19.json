{"remainingRequest":"D:\\code\\git\\dir\\financial-transaction\\financial-transaction-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\git\\dir\\financial-transaction\\financial-transaction-ui\\src\\views\\Transactions.vue?vue&type=style&index=0&id=2d8e6fe2&scoped=true&lang=css","dependencies":[{"path":"D:\\code\\git\\dir\\financial-transaction\\financial-transaction-ui\\src\\views\\Transactions.vue","mtime":1748031280747},{"path":"D:\\code\\git\\dir\\financial-transaction\\financial-transaction-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1747927105214},{"path":"D:\\code\\git\\dir\\financial-transaction\\financial-transaction-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1747927101650},{"path":"D:\\code\\git\\dir\\financial-transaction\\financial-transaction-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1747927102917},{"path":"D:\\code\\git\\dir\\financial-transaction\\financial-transaction-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747927121292},{"path":"D:\\code\\git\\dir\\financial-transaction\\financial-transaction-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1747927101632}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoudHJhbnNhY3Rpb25zIHsNCiAgcGFkZGluZzogMjBweDsNCn0NCg0KLmRlbW8tZm9ybS1pbmxpbmUgew0KICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KfQ0K"},{"version":3,"sources":["Transactions.vue"],"names":[],"mappings":";AAyRA;AACA;AACA;;AAEA;AACA;AACA","file":"Transactions.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"transactions\">\r\n    <!-- 搜索功能 -->\r\n    <el-form :inline=\"true\" class=\"demo-form-inline\">\r\n      <el-form-item label=\"账户ID\">\r\n        <el-input v-model=\"searchParams.accountId\" placeholder=\"输入账户ID\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"交易类型\">\r\n        <el-select v-model=\"searchParams.transactionType\" placeholder=\"选择交易类型\">\r\n          <el-option label=\"股票\" value=\"STOCK\"></el-option>\r\n          <el-option label=\"债券\" value=\"BOND\"></el-option>\r\n          <el-option label=\"基金\" value=\"FUND\"></el-option>\r\n          <el-option label=\"期货\" value=\"FUTURES\"></el-option>\r\n          <el-option label=\"期权\" value=\"OPTIONS\"></el-option>\r\n          <el-option label=\"外汇\" value=\"FOREX\"></el-option>\r\n          <el-option label=\"其他\" value=\"OTHERS\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"交易方式\">\r\n        <el-select v-model=\"searchParams.transactionMethod\" placeholder=\"选择交易方式\">\r\n          <el-option label=\"买入\" value=\"BUY\"></el-option>\r\n          <el-option label=\"卖出\" value=\"SELL\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"交易状态\">\r\n        <el-select v-model=\"searchParams.transactionStatus\" placeholder=\"选择交易状态\">\r\n          <el-option label=\"交易中\" value=\"PENDING\"></el-option>\r\n          <el-option label=\"已成功\" value=\"SUCCESS\"></el-option>\r\n          <el-option label=\"已撤销\" value=\"CANCELLED\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"交易开始日期\">\r\n        <el-date-picker\r\n            v-model=\"searchParams.startTime\"\r\n            type=\"date\"\r\n            placeholder=\"选择开始日期\"\r\n        ></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item label=\"交易结束日期\">\r\n        <el-date-picker\r\n            v-model=\"searchParams.endTime\"\r\n            type=\"date\"\r\n            placeholder=\"选择结束日期\"\r\n        ></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- 操作按钮 -->\r\n    <el-button type=\"primary\" @click=\"openAddTransactionDialog\">新增交易</el-button>\r\n\r\n    <!-- 交易列表 -->\r\n    <el-table :data=\"transactions\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"交易流水ID\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"accountId\" label=\"账户ID\" width=\"120\"></el-table-column>\r\n      <el-table-column label=\"交易类型\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          {{ getTypeDesc(scope.row.transactionType) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"交易方式\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          {{ getMethodDesc(scope.row.transactionMethod) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"amount\" label=\"交易金额\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"transactionTime\" label=\"交易时间\" width=\"180\"></el-table-column>\r\n      <el-table-column label=\"交易状态\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          {{ getStatusDesc(scope.row.transactionStatus) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"updateTime\" label=\"更新时间\" width=\"180\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"openEditTransactionDialog(scope.row)\">编辑</el-button>\r\n          <el-button type=\"danger\"  @click=\"deleteConfirm(scope.row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n        @current-change=\"handlePageChange\"\r\n        :current-page=\"currentPage\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"totalTransactions\"\r\n        layout=\"prev, pager, next\"\r\n    ></el-pagination>\r\n\r\n    <!-- 交易信息对话框 -->\r\n    <el-dialog title=\"交易信息\" :visible.sync=\"dialogVisible\" width=\"500px\">\r\n      <TransactionForm :transaction=\"selectedTransaction\" @submit=\"handleFormSubmit\"></TransactionForm>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TransactionForm from '../components/TransactionForm.vue';\r\nimport actions from '../store/transactions'; // 引入actions模块\r\n\r\nexport default {\r\n  components: {\r\n    TransactionForm,\r\n  },\r\n  data() {\r\n    return {\r\n      searchParams: {\r\n        accountId: null,\r\n        transactionType: null,\r\n        transactionMethod: null,\r\n        transactionStatus: null,\r\n        startTime: null,\r\n        endTime: null,\r\n      },\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      dialogVisible: false,\r\n      selectedTransaction: null,\r\n      transactions: [], // 交易记录数据\r\n      totalTransactions: 0, // 总记录数\r\n    };\r\n  },\r\n  methods: {\r\n    handlePageChange(page) {\r\n      this.currentPage = page;\r\n      this.search();\r\n    },\r\n    openAddTransactionDialog() {\r\n      this.selectedTransaction = {};\r\n      this.dialogVisible = true;\r\n    },\r\n    openEditTransactionDialog(transaction) {\r\n      this.selectedTransaction = {...transaction};\r\n      this.dialogVisible = true;\r\n    },\r\n    handleFormSubmit(transaction) {\r\n      this.dialogVisible = false;\r\n      if (transaction.id) {\r\n        // 更新交易\r\n        actions.updateTransaction(transaction)\r\n            .then((response) => {\r\n              if (response.data.code === 0) {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: '保存成功'\r\n                });\r\n                this.search();\r\n              } else {\r\n                this.$message({\r\n                  type: 'error',\r\n                  message: 'Failed to update transactions:'  + response.data.msg\r\n                });\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              this.$message({\r\n                type: 'error',\r\n                message: 'Failed to update transactions:' + error\r\n              });\r\n            });\r\n      } else {\r\n        // 新增交易\r\n        actions.saveTransaction(transaction)\r\n            .then((response) => {\r\n              if (response.data.code === 0) {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: '保存成功'\r\n                });\r\n                this.search();\r\n              } else {\r\n                this.$message({\r\n                  type: 'error',\r\n                  message: 'Failed to save transactions:'  + response.data.msg\r\n                });\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              this.$message({\r\n                type: 'error',\r\n                message: 'Failed to save transactions:' + error\r\n              });\r\n            });\r\n      }\r\n    },\r\n    search() {\r\n      const params = {\r\n        pageNo: this.currentPage,\r\n        pageSize: this.pageSize,\r\n        ...this.searchParams,\r\n      };\r\n      actions.fetchTransactions(params)\r\n          .then((response) => {\r\n            if (response.data.code === 0) {\r\n              this.transactions = response.data.data.totalList || [];\r\n              this.totalTransactions = response.data.data.total || 0;\r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: 'Failed to fetch transactions:' + response.data.msg\r\n              });\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            this.$message({\r\n              type: 'error',\r\n              message: 'Failed to fetch transactions:' + error\r\n            });\r\n          });\r\n    },\r\n    deleteConfirm(id){\r\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n          this.deleteTransaction(id);\r\n      });\r\n    },\r\n    deleteTransaction(id) {\r\n      actions.deleteTransaction(id)\r\n          .then((response) => {\r\n            if (response.data.code === 0) {\r\n              this.$message({\r\n                type: 'info',\r\n                message: '删除成功'\r\n              });\r\n              this.search();\r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: 'Failed to delete transactions:' + response.data.msg\r\n              });\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            this.$message({\r\n              type: 'error',\r\n              message: 'Failed to delete transactions:' + error\r\n            });\r\n          });\r\n    },\r\n    getTypeDesc(code) {\r\n      const typeMap = {\r\n        STOCK: '股票',\r\n        BOND: '债券',\r\n        FUND: '基金',\r\n        FUTURES: '期货',\r\n        OPTIONS: '期权',\r\n        FOREX: '外汇',\r\n        OTHERS: '其他',\r\n      };\r\n      return typeMap[code] || '未知';\r\n    },\r\n    getMethodDesc(code) {\r\n      const methodMap = {\r\n        BUY: '买入',\r\n        SELL: '卖出',\r\n      };\r\n      return methodMap[code] || '未知';\r\n    },\r\n    getStatusDesc(code) {\r\n      const statusMap = {\r\n        PENDING: '交易中',\r\n        SUCCESS: '已成功',\r\n        CANCELLED: '已撤销',\r\n      };\r\n      return statusMap[code] || '未知';\r\n    },\r\n  },\r\n  created() {\r\n    this.search();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.transactions {\r\n  padding: 20px;\r\n}\r\n\r\n.demo-form-inline {\r\n  margin-bottom: 20px;\r\n}\r\n</style>"]}]}