(function(t){function e(e){for(var n,s,i=e[0],l=e[1],c=e[2],u=0,d=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);p&&p(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var i=a[s];0!==r[i]&&(n=!1)}n&&(o.splice(e--,1),t=l(l.s=a[0]))}return t}var n={},s={app:0},r={app:0},o=[];function i(t){return l.p+"assets/js/"+({}[t]||t)+"."+{"chunk-451dd324":"8dc0b654"}[t]+".js"}function l(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={"chunk-451dd324":1};s[t]?e.push(s[t]):0!==s[t]&&a[t]&&e.push(s[t]=new Promise((function(e,a){for(var n="assets/css/"+({}[t]||t)+"."+{"chunk-451dd324":"eb7ad293"}[t]+".css",r=l.p+n,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var c=o[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===n||u===r))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],u=c.getAttribute("data-href");if(u===n||u===r)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var n=e&&e.target&&e.target.src||r,o=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete s[t],p.parentNode.removeChild(p),a(o)},p.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){s[t]=0})));var n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,a){n=r[t]=[e,a]}));e.push(n[2]=o);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=i(t);var d=new Error;c=function(e){u.onerror=u.onload=null,clearTimeout(p);var a=r[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",d.name="ChunkLoadError",d.type=n,d.request=s,a[1](d)}r[t]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(e)},l.m=t,l.c=n,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(a,n,function(e){return t[e]}.bind(null,n));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var p=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"157b":function(t,e,a){},"1c3d":function(t,e,a){"use strict";a("6156")},4346:function(t,e,a){"use strict";a("d7da")},"4d0f":function(t,e,a){"use strict";a("157b")},"51a2":function(t,e,a){"use strict";a("5920")},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[e("el-menu-item",{attrs:{index:"transactions"}},[t._v("交易管理")]),e("el-menu-item",{attrs:{index:"statistics"}},[t._v("交易统计")])],1),e("router-view")],1)},r=[],o=(a("14d9"),{data:function(){return{activeIndex:"transactions"}},methods:{handleSelect:function(t){this.$router.push({name:t})}}}),i=o,l=(a("4346"),a("2877")),c=Object(l["a"])(i,s,r,!1,null,"77008b52",null),u=c.exports,d=a("8c4f"),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"transactions"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"账户ID"}},[e("el-input",{attrs:{placeholder:"输入账户ID"},model:{value:t.searchParams.accountId,callback:function(e){t.$set(t.searchParams,"accountId",e)},expression:"searchParams.accountId"}})],1),e("el-form-item",{attrs:{label:"交易类型"}},[e("el-select",{attrs:{placeholder:"选择交易类型"},model:{value:t.searchParams.transactionType,callback:function(e){t.$set(t.searchParams,"transactionType",e)},expression:"searchParams.transactionType"}},[e("el-option",{attrs:{label:"股票",value:"STOCK"}}),e("el-option",{attrs:{label:"债券",value:"BOND"}}),e("el-option",{attrs:{label:"基金",value:"FUND"}}),e("el-option",{attrs:{label:"期货",value:"FUTURES"}}),e("el-option",{attrs:{label:"期权",value:"OPTIONS"}}),e("el-option",{attrs:{label:"外汇",value:"FOREX"}}),e("el-option",{attrs:{label:"其他",value:"OTHERS"}})],1)],1),e("el-form-item",{attrs:{label:"交易方式"}},[e("el-select",{attrs:{placeholder:"选择交易方式"},model:{value:t.searchParams.transactionMethod,callback:function(e){t.$set(t.searchParams,"transactionMethod",e)},expression:"searchParams.transactionMethod"}},[e("el-option",{attrs:{label:"买入",value:"BUY"}}),e("el-option",{attrs:{label:"卖出",value:"SELL"}})],1)],1),e("el-form-item",{attrs:{label:"交易状态"}},[e("el-select",{attrs:{placeholder:"选择交易状态"},model:{value:t.searchParams.transactionStatus,callback:function(e){t.$set(t.searchParams,"transactionStatus",e)},expression:"searchParams.transactionStatus"}},[e("el-option",{attrs:{label:"交易中",value:"PENDING"}}),e("el-option",{attrs:{label:"已成功",value:"SUCCESS"}}),e("el-option",{attrs:{label:"已撤销",value:"CANCELLED"}})],1)],1),e("el-form-item",{attrs:{label:"交易开始日期"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择开始日期"},model:{value:t.searchParams.startTime,callback:function(e){t.$set(t.searchParams,"startTime",e)},expression:"searchParams.startTime"}})],1),e("el-form-item",{attrs:{label:"交易结束日期"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择结束日期"},model:{value:t.searchParams.endTime,callback:function(e){t.$set(t.searchParams,"endTime",e)},expression:"searchParams.endTime"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1)],1),e("el-button",{attrs:{type:"primary"},on:{click:t.openAddTransactionDialog}},[t._v("新增交易")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.transactions}},[e("el-table-column",{attrs:{prop:"id",label:"交易流水ID",width:"100"}}),e("el-table-column",{attrs:{prop:"accountId",label:"账户ID",width:"120"}}),e("el-table-column",{attrs:{label:"交易类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getTypeDesc(e.row.transactionType))+" ")]}}])}),e("el-table-column",{attrs:{label:"交易方式",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getMethodDesc(e.row.transactionMethod))+" ")]}}])}),e("el-table-column",{attrs:{prop:"amount",label:"交易金额",width:"120"}}),e("el-table-column",{attrs:{prop:"transactionTime",label:"交易时间",width:"180"}}),e("el-table-column",{attrs:{label:"交易状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getStatusDesc(e.row.transactionStatus))+" ")]}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),e("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"180"}}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{on:{click:function(e){return t.openEditTransactionDialog(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleteConfirm(a.row.id)}}},[t._v("删除")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.totalTransactions,layout:"prev, pager, next"},on:{"current-change":t.handlePageChange}}),e("el-dialog",{attrs:{title:"交易信息",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("TransactionForm",{attrs:{transaction:t.selectedTransaction},on:{submit:t.handleFormSubmit}})],1)],1)},m=[],h=a("5530"),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"transaction-form"},[e("el-form",{ref:"form",attrs:{model:t.transaction,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"账户ID"}},[e("el-input",{model:{value:t.transaction.accountId,callback:function(e){t.$set(t.transaction,"accountId",e)},expression:"transaction.accountId"}})],1),e("el-form-item",{attrs:{label:"交易类型"}},[e("el-select",{model:{value:t.transaction.transactionType,callback:function(e){t.$set(t.transaction,"transactionType",e)},expression:"transaction.transactionType"}},[e("el-option",{attrs:{label:"股票",value:"STOCK"}}),e("el-option",{attrs:{label:"债券",value:"BOND"}}),e("el-option",{attrs:{label:"基金",value:"FUND"}}),e("el-option",{attrs:{label:"期货",value:"FUTURES"}}),e("el-option",{attrs:{label:"期权",value:"OPTIONS"}}),e("el-option",{attrs:{label:"外汇",value:"FOREX"}}),e("el-option",{attrs:{label:"其他",value:"OTHERS"}})],1)],1),e("el-form-item",{attrs:{label:"交易方式"}},[e("el-select",{model:{value:t.transaction.transactionMethod,callback:function(e){t.$set(t.transaction,"transactionMethod",e)},expression:"transaction.transactionMethod"}},[e("el-option",{attrs:{label:"买入",value:"BUY"}}),e("el-option",{attrs:{label:"卖出",value:"SELL"}})],1)],1),e("el-form-item",{attrs:{label:"交易金额"}},[e("el-input",{model:{value:t.transaction.amount,callback:function(e){t.$set(t.transaction,"amount",t._n(e))},expression:"transaction.amount"}})],1),e("el-form-item",{attrs:{label:"交易状态"}},[e("el-select",{model:{value:t.transaction.transactionStatus,callback:function(e){t.$set(t.transaction,"transactionStatus",e)},expression:"transaction.transactionStatus"}},[e("el-option",{attrs:{label:"交易中",value:"PENDING"}}),e("el-option",{attrs:{label:"已成功",value:"SUCCESS"}}),e("el-option",{attrs:{label:"已撤销",value:"CANCELLED"}})],1)],1),e("el-form-item",{attrs:{label:"交易时间"}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"选择交易时间"},model:{value:t.transaction.transactionTime,callback:function(e){t.$set(t.transaction,"transactionTime",e)},expression:"transaction.transactionTime"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1)],1)],1)},b=[],v={props:{transaction:{type:Object,default:function(){return{transactionTime:new Date,id:null}}}},methods:{submitForm:function(){this.transaction.transactionTime||(this.transaction.transactionTime=new Date),this.$emit("submit",Object(h["a"])({},this.transaction))}}},g=v,T=(a("1c3d"),Object(l["a"])(g,f,b,!1,null,"7ec01a80",null)),y=T.exports,S=a("bc3a"),D=a.n(S),w=D.a.create({baseURL:"",timeout:6e5,withCredentials:!0,headers:{"Content-Type":"application/json;charset=UTF-8"}}),C={instance:w,error:{"-1":function(t){console.log(t),alert("请稍后重试！")}},constructionOfResponse:{codePath:"status",successCode:"0",messagePath:"message",resultPath:"data"},fetch:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";return D()({url:t,method:a,data:"post"===a.toLowerCase()||"put"===a.toLowerCase()?e:null,params:"get"===a.toLowerCase()||"delete"===a.toLowerCase()?e:null})}},O=C,P={fetchTransactions:function(t){var e=t.pageNo,a=void 0===e?1:e,n=t.pageSize,s=void 0===n?10:n,r=t.accountId,o=t.transactionType,i=t.transactionMethod,l=t.transactionStatus,c=t.startTime,u=t.endTime,d={pageNo:a,pageSize:s,accountId:r,transactionType:o,transactionMethod:i,transactionStatus:l,startTime:c,endTime:u};return O.fetch("/api/v1/transactions/list",d,"post")},deleteTransaction:function(t){return O.fetch("/api/v1/transactions/".concat(t),{},"delete")},saveTransaction:function(t){return t.transactionTime||(t.transactionTime=new Date),O.fetch("/api/v1/transactions",t,"post")},updateTransaction:function(t){return O.fetch("/api/v1/transactions/".concat(t.id),t,"put")}},x=P,k={components:{TransactionForm:y},data:function(){return{searchParams:{accountId:null,transactionType:null,transactionMethod:null,transactionStatus:null,startTime:null,endTime:null},currentPage:1,pageSize:10,dialogVisible:!1,selectedTransaction:null,transactions:[],totalTransactions:0}},methods:{handlePageChange:function(t){this.currentPage=t,this.search()},openAddTransactionDialog:function(){this.selectedTransaction={},this.dialogVisible=!0},openEditTransactionDialog:function(t){this.selectedTransaction=Object(h["a"])({},t),this.dialogVisible=!0},handleFormSubmit:function(t){var e=this;this.dialogVisible=!1,t.id?x.updateTransaction(t).then((function(t){0===t.data.code?(e.$message({type:"info",message:"保存成功"}),e.search()):e.$message({type:"error",message:"Failed to update transactions:"+t.data.msg})}))["catch"]((function(t){e.$message({type:"error",message:"Failed to update transactions:"+t})})):x.saveTransaction(t).then((function(t){0===t.data.code?(e.$message({type:"info",message:"保存成功"}),e.search()):e.$message({type:"error",message:"Failed to save transactions:"+t.data.msg})}))["catch"]((function(t){e.$message({type:"error",message:"Failed to save transactions:"+t})}))},search:function(){var t=this,e=Object(h["a"])({pageNo:this.currentPage,pageSize:this.pageSize},this.searchParams);x.fetchTransactions(e).then((function(e){0===e.data.code?(t.transactions=e.data.data.totalList||[],t.totalTransactions=e.data.data.total||0):t.$message({type:"error",message:"Failed to fetch transactions:"+e.data.msg})}))["catch"]((function(e){t.$message({type:"error",message:"Failed to fetch transactions:"+e})}))},deleteConfirm:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteTransaction(t)}))},deleteTransaction:function(t){var e=this;x.deleteTransaction(t).then((function(t){0===t.data.code?(e.$message({type:"info",message:"删除成功"}),e.search()):e.$message({type:"error",message:"Failed to delete transactions:"+t.data.msg})}))["catch"]((function(t){e.$message({type:"error",message:"Failed to delete transactions:"+t})}))},getTypeDesc:function(t){var e={STOCK:"股票",BOND:"债券",FUND:"基金",FUTURES:"期货",OPTIONS:"期权",FOREX:"外汇",OTHERS:"其他"};return e[t]||"未知"},getMethodDesc:function(t){var e={BUY:"买入",SELL:"卖出"};return e[t]||"未知"},getStatusDesc:function(t){var e={PENDING:"交易中",SUCCESS:"已成功",CANCELLED:"已撤销"};return e[t]||"未知"}},created:function(){this.search()}},_=k,E=(a("b6b5"),Object(l["a"])(_,p,m,!1,null,"1ee7e1c2",null)),F=E.exports,$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"statistics"},[e("h1",[t._v("报表统计")]),e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:t.fetchStatistics},model:{value:t.searchDate,callback:function(e){t.searchDate=e},expression:"searchDate"}}),e("div",{staticClass:"chart-container"},[e("StatsChart",{attrs:{"stats-data":t.statsData}})],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.statsTableData}},[e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"value",label:"值"}})],1)],1)},N=[],j=a("2f62"),I=function(){var t=this,e=t._self._c;return e("div",{ref:"chart",staticClass:"chart"})},L=[],U=(a("e9f5"),a("ab43"),a("313e")),M={props:{statsData:{type:Array,default:function(){return[]}}},watch:{statsData:{handler:function(){this.initChart()},deep:!0}},mounted:function(){this.initChart()},methods:{initChart:function(){var t=this.$refs.chart,e=U["a"](t),a={title:{text:"交易统计"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:this.statsData.map((function(t){return t.name}))},yAxis:{type:"value"},series:[{data:this.statsData.map((function(t){return t.value})),type:"bar"}]};e.setOption(a)}}},A=M,B=(a("4d0f"),Object(l["a"])(A,I,L,!1,null,"88a6fd20",null)),R=B.exports,z={components:{StatsChart:R},data:function(){return{searchDate:"",statsData:[],statsTableData:[{name:"今日交易额",value:"0.00"},{name:"今日交易笔数",value:"0"},{name:"账户总余额",value:"0.00"},{name:"总收入",value:"0.00"},{name:"总支出",value:"0.00"}]}},computed:Object(h["a"])({},Object(j["c"])("statistics",["statistics"])),methods:Object(h["a"])(Object(h["a"])({},Object(j["b"])("statistics",["fetchStatistics"])),{},{updateStatsTableData:function(){this.statsTableData=[{name:"今日交易额",value:this.statistics.dailyAmount.toFixed(2)},{name:"今日交易笔数",value:this.statistics.dailyCount.toString()},{name:"账户总余额",value:this.statistics.totalBalance.toFixed(2)},{name:"总收入",value:this.statistics.totalIncome.toFixed(2)},{name:"总支出",value:this.statistics.totalExpense.toFixed(2)}],this.statsData=this.statistics.chartData}}),watch:{statistics:{handler:function(){this.updateStatsTableData()},deep:!0}},created:function(){this.fetchStatistics(this.searchDate)}},V=z,H=(a("51a2"),Object(l["a"])(V,$,N,!1,null,"203a357e",null)),K=H.exports;n["default"].use(d["a"]);var G=[{path:"/",redirect:"/transactions"},{path:"/transactions",name:"transactions",component:F},{path:"/statistics",name:"statistics",component:K},{path:"*",name:"NotFound",component:function(){return a.e("chunk-451dd324").then(a.bind(null,"9703"))}}],X=new d["a"]({mode:"history",base:"",routes:G}),Y=X,q={};n["default"].use(j["a"]);var J=new j["a"].Store({modules:{transactions:x,statistics:q}}),Q=a("5c96"),W=a.n(Q);a("0fae");n["default"].config.productionTip=!1,n["default"].use(W.a),new n["default"]({router:Y,store:J,render:function(t){return t(u)}}).$mount("#app")},5920:function(t,e,a){},6156:function(t,e,a){},a1f7:function(t,e,a){},b6b5:function(t,e,a){"use strict";a("a1f7")},d7da:function(t,e,a){}});